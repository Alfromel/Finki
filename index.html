<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#0a0a1a">
  <link rel="manifest" href="/manifest.json">
  <title>Finki TV Premium</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&family=Montserrat:wght@600;700;800&display=swap" rel="stylesheet">
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <meta name="apple-mobile-web-app-title" content="Magis TV">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="manifest" href="/site.webmanifest">
  <meta name="theme-color" content="#0a0a1a" media="(prefers-color-scheme: dark)">
  <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
  <style>
    :root {
      --primary-color: #ff0000;
      --primary-dark: #cc0000;
      --primary-light: #ff3333;
      --bg-dark: #000000;
      --bg-darker: #0a0a0a;
      --bg-card: #1a1a1a;
      --text-light: #ffffff;
      --text-gray: #cccccc;
      --accent-red: #ff3333;
      --shadow: 0 4px 12px rgba(255, 0, 0, 0.3);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Roboto', sans-serif;
      background-color: var(--bg-dark);
      color: var(--text-light);
      line-height: 1.6;
      overflow-x: hidden;
    }

    .app-container {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Header Styles */
    .app-header {
      background: var(--bg-darker);
      padding: 15px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 2px solid var(--primary-color);
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .logo-container {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo {
      width: 40px;
      height: 40px;
      background: var(--primary-color);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
    }

    .logo-text {
      font-family: 'Montserrat', sans-serif;
      font-weight: 800;
      font-size: 24px;
      color: var(--primary-color);
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .header-right {
      display: flex;
      align-items: center;
    }

    .header-actions {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .settings-btn {
      background: var(--bg-card);
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-gray);
      cursor: pointer;
      transition: all 0.3s;
    }

    .settings-btn:hover {
      color: var(--primary-color);
      background: #222;
    }

    /* Main Content */
    .main-content {
      flex: 1;
      padding: 30px;
    }

    .content-section {
      display: none;
    }

    .content-section.active {
      display: block;
    }

    .section-title {
      font-family: 'Montserrat', sans-serif;
      font-weight: 700;
      font-size: 28px;
      margin-bottom: 25px;
      color: var(--primary-color);
      text-transform: uppercase;
      letter-spacing: 1px;
      text-align: center;
    }

    /* Channels Grid */
    .channels-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 25px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .channel-card {
      background: var(--bg-card);
      border-radius: 12px;
      overflow: hidden;
      cursor: pointer;
      transition: all 0.3s;
      border: 2px solid #333;
      position: relative;
    }

    .channel-card:hover {
      transform: translateY(-8px);
      box-shadow: var(--shadow);
      border-color: var(--primary-color);
    }

    .channel-thumbnail {
      position: relative;
      height: 160px;
      background: #000;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .channel-thumbnail img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s;
    }

    .channel-card:hover .channel-thumbnail img {
      transform: scale(1.05);
    }

    .channel-live-badge {
      position: absolute;
      top: 10px;
      right: 10px;
      background: var(--primary-color);
      color: white;
      font-size: 11px;
      padding: 4px 10px;
      border-radius: 12px;
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .channel-title {
      padding: 20px;
      font-weight: 600;
      text-align: center;
      font-size: 16px;
      background: var(--bg-darker);
      border-top: 1px solid #333;
    }

    /* Series Grid */
    .series-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 25px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .series-card {
      background: var(--bg-card);
      border-radius: 12px;
      overflow: hidden;
      cursor: pointer;
      transition: all 0.3s;
      border: 2px solid #333;
      position: relative;
    }

    .series-card:hover {
      transform: translateY(-8px);
      box-shadow: var(--shadow);
      border-color: var(--primary-color);
    }

    .series-thumbnail {
      position: relative;
      height: 160px;
      background: #000;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .series-thumbnail img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s;
    }

    .series-card:hover .series-thumbnail img {
      transform: scale(1.05);
    }

    .series-title {
      padding: 20px;
      font-weight: 600;
      text-align: center;
      font-size: 16px;
      background: var(--bg-darker);
      border-top: 1px solid #333;
    }

    /* Coming Soon Sections */
    .coming-full-container {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 60vh;
    }

    .coming-full-content {
      text-align: center;
      max-width: 500px;
    }

    .coming-full-content i {
      font-size: 80px;
      color: #333;
      margin-bottom: 20px;
    }

    .coming-full-content h2 {
      font-size: 28px;
      margin-bottom: 15px;
      color: var(--primary-color);
    }

    .coming-full-content p {
      color: var(--text-gray);
      margin-bottom: 20px;
    }

    .coming-badge {
      background: var(--primary-color);
      color: white;
      padding: 8px 20px;
      border-radius: 20px;
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    /* Footer */
    .app-footer {
      background: var(--bg-darker);
      border-top: 1px solid #333;
      padding: 15px 0;
      margin-top: auto;
    }

    .footer-nav {
      display: flex;
      justify-content: center;
      gap: 40px;
    }

    .footer-nav-btn {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
      background: none;
      border: none;
      color: var(--text-gray);
      cursor: pointer;
      padding: 10px;
      border-radius: 8px;
      transition: all 0.3s;
    }

    .footer-nav-btn i {
      font-size: 20px;
    }

    .footer-nav-btn span {
      font-size: 12px;
      font-weight: 500;
    }

    .footer-nav-btn.active {
      color: var(--primary-color);
    }

    .footer-nav-btn:hover {
      background: var(--bg-card);
    }

    /* Fullscreen Player */
    .fullscreen-player {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      z-index: 2000;
      display: none;
    }

    .fullscreen-player.active {
      display: block;
    }

    .fullscreen-player iframe {
      width: 100%;
      height: 100%;
      border: none;
    }

    /* Series Fullscreen Player */
    .series-fullscreen-player {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      z-index: 2000;
      display: none;
    }

    .series-fullscreen-player.active {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .series-fullscreen-player iframe {
      width: 90%;
      height: 90%;
      border: none;
    }

    /* Modal */
    .tv-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .tv-modal.active {
      display: flex;
    }

    .modal-content {
      background: var(--bg-card);
      border-radius: 15px;
      width: 90%;
      max-width: 400px;
      padding: 30px;
      box-shadow: var(--shadow);
      border: 1px solid #333;
      text-align: center;
    }

    .modal-content h2 {
      color: var(--primary-color);
      margin-bottom: 25px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .modal-actions {
      margin-top: 25px;
    }

    .btn-primary {
      background: var(--primary-color);
      color: white;
      border: none;
      border-radius: 8px;
      padding: 12px 30px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s;
    }

    .btn-primary:hover {
      background: var(--primary-dark);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .app-header {
        padding: 15px;
      }
      
      .channels-grid {
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
        gap: 15px;
      }
      
      .series-grid {
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
        gap: 15px;
      }
      
      .footer-nav {
        gap: 20px;
      }
      
      .main-content {
        padding: 20px;
      }
      
      .section-title {
        font-size: 24px;
      }

      .series-fullscreen-player iframe {
        width: 100%;
        height: 100%;
      }
    }
  </style>
</head>
<body class="tv-mode">
    <div class="app-container">
        <!-- App Header -->
        <header class="app-header">
            <div class="header-left">
                <div class="logo-container">
                    <div class="logo">F</div>
                    <span class="logo-text">Finki TV</span>
                </div>
            </div>
            <div class="header-right">
                <div class="header-actions">
                    <button class="settings-btn" id="settings-btn">
                        <i class="fas fa-cog"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Home Section -->
            <section class="content-section active" id="home-section">
                <div class="channels-container">
                    <h2 class="section-title">CANALES EN VIVO</h2>
                    <div class="channels-grid" id="channels-grid">
                        <!-- Channels will be loaded here -->
                    </div>
                </div>
            </section>

            <!-- Channels Section -->
            <section class="content-section" id="channels-section">
                <div class="channels-container">
                    <h2 class="section-title">TODOS LOS CANALES</h2>
                    <div class="channels-grid" id="all-channels-grid">
                        <!-- All channels will be loaded here -->
                    </div>
                </div>
            </section>

            <!-- Movies Section -->
            <section class="content-section" id="movies-section">
                <div class="coming-full-container">
                    <div class="coming-full-content">
                        <i class="fas fa-film"></i>
                        <h2>SECCIÓN DE PELÍCULAS</h2>
                        <p>Estamos trabajando para traerte el mejor catálogo de películas</p>
                        <span class="coming-badge">PRÓXIMAMENTE</span>
                    </div>
                </div>
            </section>

            <!-- Series Section -->
            <section class="content-section" id="series-section">
                <div class="series-container">
                    <h2 class="section-title">SERIES WWE</h2>
                    <div class="series-grid" id="series-grid">
                        <div class="series-card" data-video='https://www.youtube.com/embed/lvGEJ686CmE?si=kBCPgGWstXeZB_3h'>
                            <div class="series-thumbnail">
                                <img src="https://i.ytimg.com/vi/lvGEJ686CmE/maxresdefault.jpg" alt="WWE" loading="lazy">
                            </div>
                            <div class="series-title">WWE</div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Quick Navigation Footer -->
        <footer class="app-footer">
            <div class="footer-nav">
                <button class="footer-nav-btn active" data-section="home">
                    <i class="fas fa-home"></i>
                    <span>Inicio</span>
                </button>
                <button class="footer-nav-btn" data-section="channels">
                    <i class="fas fa-tv"></i>
                    <span>Canales</span>
                </button>
                <button class="footer-nav-btn" data-section="movies">
                    <i class="fas fa-film"></i>
                    <span>Películas</span>
                </button>
                <button class="footer-nav-btn" data-section="series">
                    <i class="fas fa-tv"></i>
                    <span>Series</span>
                </button>
            </div>
        </footer>
    </div>

    <!-- Fullscreen Player for Channels -->
    <div class="fullscreen-player" id="fullscreen-player">
        <div id="fullscreen-iframe-container"></div>
    </div>

    <!-- Fullscreen Player for Series -->
    <div class="series-fullscreen-player" id="series-fullscreen-player">
        <iframe id="series-iframe" allowfullscreen></iframe>
    </div>

    <!-- Settings Modal -->
    <div class="tv-modal" id="settings-modal">
        <div class="modal-content">
            <h2><i class="fas fa-cog"></i> AJUSTES</h2>
            <div class="modal-actions">
                <button class="btn-primary" id="close-settings">Cerrar</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const body = document.body;
            const settingsBtn = document.getElementById('settings-btn');
            const settingsModal = document.getElementById('settings-modal');
            const closeSettingsBtn = document.getElementById('close-settings');
            const footerNavBtns = document.querySelectorAll('.footer-nav-btn');
            const contentSections = document.querySelectorAll('.content-section');
            const channelsGrid = document.getElementById('channels-grid');
            const allChannelsGrid = document.getElementById('all-channels-grid');
            const seriesGrid = document.getElementById('series-grid');
            const fullscreenPlayer = document.getElementById('fullscreen-player');
            const seriesFullscreenPlayer = document.getElementById('series-fullscreen-player');
            const fullscreenIframeContainer = document.getElementById('fullscreen-iframe-container');
            const seriesIframe = document.getElementById('series-iframe');

            // Channel data
            const channels = [
                {
                    id: 1,
                    title: "BOLIVIA TV",
                    thumbnail: "https://www.betanoticias.com/wp-content/uploads/2014/02/bolivia-tv.jpg",
                    iframeCode: `<div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;"><iframe src="https://geo.dailymotion.com/player.html?video=x9nzqpo" style="width:100%; height:100%; position:absolute; left:0px; top:0px; overflow:hidden; border:none;" allowfullscreen title="Dailymotion Video Player" allow="web-share"></iframe></div>`
                },
                {
                    id: 2,
                    title: "RED UNO",
                    thumbnail: "https://yt3.googleusercontent.com/Z9-5VuT1xqHWp_QJ3JvLD-PZlYQt_subNOfi-Lz-qYN75iaFP2r0oK7qclcnP4o9biLIo6qQROA=s900-c-k-c0x00ffffff-no-rj",
                    iframeCode: `<div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;">
                        <iframe src="https://geo.dailymotion.com/player.html?video=x9n2qyk"
                            style="width:100%; height:100%; position:absolute; left:0px; top:0px; overflow:hidden; border:none;"
                            allowfullscreen
                            title="Dailymotion Video Player"
                            allow="web-share">
                        </iframe>
                    </div>`
                },
                {
                    id: 3,
                    title: "UNITEL",
                    thumbnail: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSOdEfaOkHFy6LeOzD_hgc1vDvrwDf0OPf45g&s",
                    iframeCode: `<div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;"><iframe src="https://geo.dailymotion.com/player.html?video=x9onjrk" style="width:100%; height:100%; position:absolute; left:0px; top:0px; overflow:hidden; border:none;" allowfullscreen title="Dailymotion Video Player" allow="web-share"></iframe></div>`
                },
                {
                    id: 4,
                    title: "ATB",
                    thumbnail: "https://play-lh.googleusercontent.com/sgL9elaLnROZ-njx1G5n7PyIcYWvaUuIsjecWtTOAY275giwquEG_J07ETmJbxfBFNaX",
                    iframeCode: `<div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;">
                        <iframe src="https://geo.dailymotion.com/player.html?video=x84eirw"
                            style="width:100%; height:100%; position:absolute; left:0px; top:0px; overflow:hidden; border:none;"
                            allowfullscreen
                            title="Dailymotion Video Player"
                            allow="web-share">
                        </iframe>
                    </div>`
                },
                {
                    id: 5,
                    title: "BOLIVISION",
                    thumbnail: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTz_l8SYGwAy5V9Bzc2ZloQdwjhNHW-zV3cqg&s",
                    iframeCode: `<div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;">
                        <video width="100%" height="100%" controls autoplay style="position:absolute; left:0px; top:0px;">
                            <source src="https://d2qsan2ut81n2k.cloudfront.net/live/20446f64-67d8-4100-8c4b-20a759a8e919/ts:abr.m3u8" type="application/x-mpegURL">
                            Tu navegador no soporta el elemento de video.
                        </video>
                    </div>`
                }
            ];
            
            // Current playing channel
            let currentChannel = null;
            let isFullscreen = false;
            let currentChannelIndex = 0;
            let tvRemoteEnabled = false;

            // Initialize the app
            function initApp() {
                setupEventListeners();
                renderChannels();
                setupSeries();
                showSection('home');
                setupAutoFullscreen();
                setupTVRemote();
                setupBackButtonHandler();
            }

            // Setup series functionality
            function setupSeries() {
                const seriesCards = document.querySelectorAll('.series-card');
                seriesCards.forEach(card => {
                    card.addEventListener('click', function() {
                        const videoUrl = this.getAttribute('data-video');
                        playSeriesFullscreen(videoUrl);
                    });
                });
            }

            // Play series in fullscreen
            function playSeriesFullscreen(videoUrl) {
                seriesIframe.src = videoUrl + '?autoplay=1';
                seriesFullscreenPlayer.classList.add('active');
                document.body.style.overflow = 'hidden';
                
                if (!document.fullscreenElement) {
                    document.documentElement.requestFullscreen().catch(err => {
                        console.log('Fullscreen error:', err);
                    });
                }
            }

            // Exit series fullscreen
            function exitSeriesFullscreen() {
                seriesFullscreenPlayer.classList.remove('active');
                document.body.style.overflow = 'auto';
                seriesIframe.src = '';
                
                if (document.fullscreenElement) {
                    document.exitFullscreen();
                }
            }

            // Setup TV Remote functionality
            function setupTVRemote() {
                if (navigator.tv || navigator.remoteControl) {
                    console.log('TV Remote API disponible');
                }
                console.log('TV Remote configurado - Usa las flechas para cambiar canales');
            }

            // Setup back button handler
            function setupBackButtonHandler() {
                window.addEventListener('popstate', function(event) {
                    if (isFullscreen) {
                        exitFullscreen();
                        event.preventDefault();
                        window.history.pushState(null, null, window.location.href);
                    }
                    if (seriesFullscreenPlayer.classList.contains('active')) {
                        exitSeriesFullscreen();
                        event.preventDefault();
                        window.history.pushState(null, null, window.location.href);
                    }
                });

                window.history.pushState(null, null, window.location.href);
            }

            // Setup event listeners
            function setupEventListeners() {
                settingsBtn.addEventListener('click', openSettings);
                closeSettingsBtn.addEventListener('click', closeSettings);
                
                footerNavBtns.forEach(btn => {
                    btn.addEventListener('click', function() {
                        const section = this.dataset.section;
                        showSection(section);
                        setActiveFooterNav(this);
                    });
                });
                
                // Keyboard controls
                document.addEventListener('keydown', handleKeyboard);
                
                // Touch events
                document.addEventListener('touchstart', handleTouchStart, false);
                document.addEventListener('touchmove', handleTouchMove, false);

                // Series fullscreen close on click
                seriesFullscreenPlayer.addEventListener('click', exitSeriesFullscreen);
            }

            // Touch controls para cambiar canales
            let xDown = null;
            let yDown = null;

            function handleTouchStart(evt) {
                if (!isFullscreen) return;
                
                const firstTouch = evt.touches[0];
                xDown = firstTouch.clientX;
                yDown = firstTouch.clientY;
            }

            function handleTouchMove(evt) {
                if (!xDown || !yDown || !isFullscreen) return;

                const xUp = evt.touches[0].clientX;
                const yUp = evt.touches[0].clientY;

                const xDiff = xDown - xUp;
                const yDiff = yDown - yUp;

                if (Math.abs(xDiff) > Math.abs(yDiff)) {
                    if (xDiff > 0) {
                        changeChannel(1);
                    } else {
                        changeChannel(-1);
                    }
                }

                xDown = null;
                yDown = null;
            }

            // Handle keyboard
            function handleKeyboard(e) {
                if (isFullscreen) {
                    switch(e.key) {
                        case 'Escape':
                        case 'Backspace':
                            exitFullscreen();
                            e.preventDefault();
                            break;
                        case 'ArrowLeft':
                            changeChannel(-1);
                            e.preventDefault();
                            break;
                        case 'ArrowRight':
                            changeChannel(1);
                            e.preventDefault();
                            break;
                        case '0':
                        case '1':
                        case '2':
                        case '3':
                        case '4':
                        case '5':
                        case '6':
                        case '7':
                        case '8':
                        case '9':
                            const channelNumber = parseInt(e.key);
                            if (channelNumber <= channels.length) {
                                changeToChannel(channelNumber - 1);
                            }
                            e.preventDefault();
                            break;
                    }
                } else if (seriesFullscreenPlayer.classList.contains('active')) {
                    if (e.key === 'Escape' || e.key === 'Backspace') {
                        exitSeriesFullscreen();
                        e.preventDefault();
                    }
                }
            }

            // Cambiar canal (dirección: -1 para anterior, 1 para siguiente)
            function changeChannel(direction) {
                currentChannelIndex += direction;
                
                if (currentChannelIndex < 0) {
                    currentChannelIndex = channels.length - 1;
                } else if (currentChannelIndex >= channels.length) {
                    currentChannelIndex = 0;
                }
                
                playChannelFullscreen(channels[currentChannelIndex]);
                showChannelChangeNotification(channels[currentChannelIndex].title);
            }

            // Cambiar a canal específico
            function changeToChannel(index) {
                if (index >= 0 && index < channels.length) {
                    currentChannelIndex = index;
                    playChannelFullscreen(channels[currentChannelIndex]);
                    showChannelChangeNotification(channels[currentChannelIndex].title);
                }
            }

            // Mostrar notificación de cambio de canal
            function showChannelChangeNotification(channelName) {
                const existingNotification = document.querySelector('.channel-change-notification');
                if (existingNotification) {
                    existingNotification.remove();
                }
                
                const notification = document.createElement('div');
                notification.className = 'channel-change-notification';
                notification.innerHTML = `
                    <div class="notification-content">
                        <span class="channel-number">${currentChannelIndex + 1}</span>
                        <span class="channel-name">${channelName}</span>
                    </div>
                `;
                
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    left: 50%;
                    transform: translateX(-50%);
                    background: rgba(0,0,0,0.8);
                    color: white;
                    padding: 15px 25px;
                    border-radius: 10px;
                    font-size: 18px;
                    z-index: 10000;
                    transition: opacity 0.3s ease;
                    display: flex;
                    align-items: center;
                    gap: 15px;
                `;
                
                const notificationContent = notification.querySelector('.notification-content');
                notificationContent.style.cssText = `
                    display: flex;
                    align-items: center;
                    gap: 15px;
                `;
                
                const channelNumber = notification.querySelector('.channel-number');
                channelNumber.style.cssText = `
                    background: #e74c3c;
                    color: white;
                    width: 30px;
                    height: 30px;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-weight: bold;
                `;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.style.opacity = '0';
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.remove();
                        }
                    }, 300);
                }, 2000);
            }

            // Setup auto fullscreen functionality
            function setupAutoFullscreen() {
                const observer = new MutationObserver(function(mutations) {
                    mutations.forEach(function(mutation) {
                        if (mutation.type === 'childList' && fullscreenIframeContainer.children.length > 0) {
                            enterFullscreen();
                        }
                    });
                });
                
                observer.observe(fullscreenIframeContainer, { childList: true });
            }

            // Enter fullscreen mode
            function enterFullscreen() {
                fullscreenPlayer.classList.add('active');
                document.body.style.overflow = 'hidden';
                isFullscreen = true;
                currentChannelIndex = channels.findIndex(ch => ch.id === currentChannel.id);
                
                if (!document.fullscreenElement) {
                    document.documentElement.requestFullscreen().catch(err => {
                        console.log('Fullscreen error:', err);
                    });
                }
                
                addTVControls();
            }

            // Agregar controles de TV en pantalla completa
            function addTVControls() {
                const existingControls = document.querySelector('.tv-controls-overlay');
                if (existingControls) {
                    existingControls.remove();
                }
                
                const controls = document.createElement('div');
                controls.className = 'tv-controls-overlay';
                controls.innerHTML = `
                    <div class="tv-controls-info">
                        <div class="current-channel">${currentChannel.title}</div>
                        <div class="tv-instructions">
                            ← → Cambiar canal | ESC Salir | 1-${channels.length} Canal directo
                        </div>
                    </div>
                `;
                
                controls.style.cssText = `
                    position: fixed;
                    bottom: 20px;
                    left: 50%;
                    transform: translateX(-50%);
                    background: rgba(0,0,0,0.7);
                    color: white;
                    padding: 10px 20px;
                    border-radius: 10px;
                    font-size: 14px;
                    z-index: 9999;
                    text-align: center;
                    transition: opacity 0.3s ease;
                `;
                
                const channelInfo = controls.querySelector('.current-channel');
                channelInfo.style.cssText = `
                    font-size: 16px;
                    font-weight: bold;
                    margin-bottom: 5px;
                `;
                
                const instructions = controls.querySelector('.tv-instructions');
                instructions.style.cssText = `
                    font-size: 12px;
                    opacity: 0.8;
                `;
                
                fullscreenPlayer.appendChild(controls);
                
                setTimeout(() => {
                    controls.style.opacity = '0';
                }, 5000);
                
                fullscreenPlayer.addEventListener('mousemove', showTVControls);
                fullscreenPlayer.addEventListener('touchstart', showTVControls);
                
                function showTVControls() {
                    controls.style.opacity = '1';
                    setTimeout(() => {
                        controls.style.opacity = '0';
                    }, 5000);
                }
            }

            // Exit fullscreen mode
            function exitFullscreen() {
                fullscreenPlayer.classList.remove('active');
                document.body.style.overflow = 'auto';
                isFullscreen = false;
                
                if (document.fullscreenElement) {
                    document.exitFullscreen();
                }
                
                fullscreenIframeContainer.innerHTML = '';
                
                const controls = document.querySelector('.tv-controls-overlay');
                if (controls) {
                    controls.remove();
                }
                
                fullscreenPlayer.removeEventListener('mousemove', showTVControls);
                fullscreenPlayer.removeEventListener('touchstart', showTVControls);
            }

            // Open settings modal
            function openSettings() {
                settingsModal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }

            // Close settings modal
            function closeSettings() {
                settingsModal.classList.remove('active');
                document.body.style.overflow = 'auto';
            }

            // Show selected section
            function showSection(sectionId) {
                contentSections.forEach(section => {
                    section.classList.remove('active');
                });
                
                document.getElementById(`${sectionId}-section`).classList.add('active');
            }

            // Set active footer navigation
            function setActiveFooterNav(activeItem) {
                footerNavBtns.forEach(btn => {
                    btn.classList.remove('active');
                });
                
                activeItem.classList.add('active');
            }

            // Render channels to the grids
            function renderChannels() {
                channelsGrid.innerHTML = '';
                allChannelsGrid.innerHTML = '';
                
                channels.forEach((channel, index) => {
                    const channelCard = createChannelCard(channel, index);
                    channelsGrid.appendChild(channelCard);
                    
                    const fullChannelCard = createChannelCard(channel, index);
                    allChannelsGrid.appendChild(fullChannelCard);
                });
            }

            // Create channel card element
            function createChannelCard(channel, index) {
                const card = document.createElement('div');
                card.className = 'channel-card';
                card.dataset.id = channel.id;
                
                card.innerHTML = `
                    <div class="channel-thumbnail">
                        <img src="${channel.thumbnail}" alt="${channel.title}" loading="lazy">
                        <span class="channel-live-badge">EN VIVO</span>
                        <span class="channel-number">${index + 1}</span>
                    </div>
                    <div class="channel-title">${channel.title}</div>
                `;
                
                card.addEventListener('click', function() {
                    playChannelFullscreen(channel);
                });
                
                return card;
            }

            // Play channel in fullscreen
            function playChannelFullscreen(channel) {
                currentChannel = channel;
                currentChannelIndex = channels.findIndex(ch => ch.id === channel.id);
                fullscreenIframeContainer.innerHTML = channel.iframeCode;
            }

            // Initialize the app
            initApp();
        });
    </script>
</body>
</html>
